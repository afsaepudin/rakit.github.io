<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no"/>
  <meta name="theme-color" content="#ffffff"/>
  <meta name="description" content="Yet another PHP micro framework to help you build web app or web service with ease." />
  <meta name="ogUrl" property="og:url" content="https://rakit.github.io/id/documentation.html" />
  <meta name="ogType" property="og:type" content="article" />
  <meta name="ogTitle" property="og:title" content="Rakit Framework - Documentation" />
  <meta name="ogDescription" property="og:description" content="Yet another PHP micro framework to help you build web app or web service with ease." />
  <meta name="ogImage" property="og:image" content="https://rakit.github.io/assets/img/fb-cover.png" />

  <title>Dokumentasi &middot; Rakit Framework</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css">
  <link rel="stylesheet" href="/assets/css/style.min.css">
</head>
<body class="page-with-navbar">
  <header class="navbar">
    <div class="container">
      <a href="index.html" class="navbar-brand">
        <img src="/assets/img/logo-navbar.png">
      </a>
      <div class="navbar-right">
        
<ul class="navbar-menu">
  <li><a href="index.html">Beranda</a></li>
  <li class="active"><a href="documentation.html">Dokumentasi</a></li>
  <li><a href="https://github.com/rakit/framework" target="_blank">Github</a></li>
</ul>

      </div>
    </div>
  </header>
  <main>
    <div class="container">
      <div class="row">
        <div class="three columns">
          
            <ul class="nav main-nav">
  <li>
    <a href="/documentation.html"><small>English please!</small></a>
  </li>
  <li class="header"><a href="#getting-started">Memulai</a></li>
  <li>
    <a href="#requirements">Kebutuhan</a>
  </li>
  <li>
    <a href="#installation">Instalasi</a>
  </li>
  <li>
    <a href="#hello-world">Hello World</a>
  </li>
  <li class="header"><a href="#guide">Panduan</a></li>
  <li>
    <a href="#routing">Konfigurasi</a>
  </li>
  <li>
    <a href="#routing">Routing</a>
  </li>
  <li>
    <a href="#middleware">Middleware</a>
  </li>
  <li>
    <a href="#request">Request</a>
  </li>
  <li>
    <a href="#response">Response</a>
  </li>
  <li>
    <a href="#container">Container</a>
  </li>
  <li class="header">You May Need</li>
  <li>
    <a href="https://github.com/rakit/validation" target="_blank">Validation</a>
  </li>
  <li>
    <a href="https://github.com/rakit/session" target="_blank">Session Manager</a>
  </li>
  <li>
    <a href="https://github.com/rakit/blade" target="_blank">View Blade</a>
  </li>
  <li>
    <a href="https://github.com/emsifa/Block" target="_blank">View Block</a>
  </li>
</ul>
          
        </div>
        <div class="nine columns">
          <div class="content">
          <blockquote class="info font-small">
  <h5><strong>CATATAN</strong></h5>
  Berikut beberapa hal yang perlu kamu ketahui pada penulisan dokumentasi ini:
  <ul class="no-margin">
    <li>
      Beberapa code snippet pada dokumentasi ini menyertakan `...`, 
      maksudnya adalah pada bagian tersebut dapat berisi "kode lain" yang tidak berhubungan dengan topik yang dibahas.
      Kamu tidak perlu menuliskan `...`seperti itu.
    </li>
    <li>
      Kata 'Controller' pada dokumentasi disini maksudnya adalah 'Route handler' yang dapat berupa <em>callable</em>
      atau class Controller.
    </li>
  </ul>
</blockquote>

<p><a id="getting-started"></a></p>
<h1 id="memulai">Memulai</h1>

<p><a id="requirements"></a></p>
<h2 id="kebutuhan"><a href="#requirements">Kebutuhan</a></h2>

<ul>
  <li>PHP 5.5 keatas.</li>
  <li>Composer untuk instalasi.</li>
</ul>

<p><a id="installation"></a></p>
<h2 id="instalasi"><a href="#installation">Instalasi</a></h2>

<p>Pertama-tama, siapkan direktori proyekmu:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="nb">cd</span> /var/www
mkdir my-project
</code></pre>
</div>

<p>Setelah itu, install rakit framework menggunakan perintah composer dibawah ini:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>composer require <span class="s2">"rakit/framework"</span>
</code></pre>
</div>

<p><a id="hello-world"></a></p>
<h2 id="hello-world"><a href="#hello-world">Hello World</a></h2>

<p>Buat file index.php, lalu ketikkan kode berikut:</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?php</span>
        
<span class="k">use</span> <span class="nx">Rakit\Framework\App</span><span class="p">;</span>

<span class="k">require</span><span class="p">(</span><span class="s2">"vendor/autoload.php"</span><span class="p">);</span>

<span class="c1">// inisialisasi App
</span><span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">App</span><span class="p">(</span><span class="s1">'my-awesome-app'</span><span class="p">);</span>

<span class="c1">// mendaftarkan route
</span><span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">"Hello World!"</span><span class="p">;</span>
<span class="p">});</span>

<span class="c1">// menjalankan app
</span><span class="nv">$app</span><span class="o">-&gt;</span><span class="na">run</span><span class="p">();</span>
</code></pre>
</div>

<p>Jalankan server (disini kami menggunakan PHP built-in server):</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>php -S localhost:8000
</code></pre>
</div>

<p>Kemudian buka ‘http://localhost:8000’ pada web browser, dan voila!</p>

<p><a id="guide"></a></p>
<h1 id="panduan">Panduan</h1>

<p><a id="configuration"></a></p>
<h2 id="konfigurasi"><a href="#configuration">Konfigurasi</a></h2>

<p>Rakit framework pada dasarnya dapat berjalan tanpa konfigurasi apapun.
Namun seringkali kita ingin menyimpan beberapa pengaturan pada aplikasi,
Rakit framework menyajikan beberapa API untuk mempermudah hal tersebut.</p>

<p>Berikut adalah beberapa hal yang mesti kamu ketahui tentang konfigurasi pada Rakit framework:</p>

<p><a id="config-get-set"></a></p>
<h4 id="getset-konfigurasi"><a href="#config-get-set">Get/Set Konfigurasi</a></h4>

<p>Konfigurasi pada rakit framework tersimpan pada objek <code class="highlighter-rouge">config</code>
yang mengimplementasikan <code class="highlighter-rouge">ArrayAccess</code>. 
Untuk itu, kamu dapat menyimpan dan mengambil konfigurasi layaknya memberikan dan mengambil nilai dari array.</p>

<p>Berikut contohnya:</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code>// set konfigurasi 'something'
$app-&gt;config['something'] = 'value';

// mengambil konfigurasi 'something'
echo $app-&gt;config['something'];
</code></pre>
</div>

<p><a id="config-dot-notation"></a></p>
<h4 id="memahami-dot-notation-pada-konfigurasi"><a href="#config-dot-notation">Memahami Dot Notation pada Konfigurasi</a></h4>

<p>Perlu kamu ketahui, rakit framework memiliki kemampuan untuk mengambil konfigurasi dengan dot notation.
Jika pada array biasa kamu melakukan hal seperti ini:</p>

<pre><code class="php">// set konfigurasi
$configs['database'] = [
    'host' =&gt; 'localhost',
    'username' =&gt; 'root',
    'password' =&gt; 's3cR3t',
    'name' =&gt; 'my_db'
];

...

// mengambil konfigurasi (pada file lain)
$db_host = isset($configs['database']['host']) ? $configs['database']['host'] : 'localhost';
$db_username = isset($configs['database']['username']) ? $configs['database']['username'] : 'root';
$db_password = isset($configs['database']['password']) ? $configs['database']['password'] : '';
</code></pre>

<p>Dengan rakit framework, kode diatas akan jadi seperti ini’</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code>// set konfigurasi
$app-&gt;config['database'] = [
    'host' =&gt; 'localhost',
    'username' =&gt; 'root',
    'password' =&gt; 's3cR3t',
    'name' =&gt; 'my_db'
];

...

// mengambil konfigurasi (pada file lain)
$db_host = $app-&gt;config['database.host'] ?: 'localhost';
$db_username = $app-&gt;config['database.username'] ?: 'root';
$db_password = $app-&gt;config['database.password'] ?: '';
</code></pre>
</div>

<p>Lebih enak dipandang bukan? ya itulah kegunaan dot notation. Untuk meminimalisir isset-isset itu.</p>

<blockquote>
  <p>Jika kunci (key) yang diakses dengan dot notation tidak ada, nilai yang dikembalikan adalah <code class="highlighter-rouge">null</code></p>
</blockquote>

<p><a id="config-load-dir"></a></p>
<h4 id="load-konfigurasi-pada-direktori"><a href="#config-load-dir">Load Konfigurasi pada Direktori</a></h4>

<p>Jika kamu pernah menggunakan framework-framework full stack seperti Laravel, Codeigniter, dsb kamu
akan menemukan kalau file konfigurasi dikumpulkan kedalam sebuah direktori yang dikelompokkan kedalam file.
Rakit framework memfasilitasi hal tersebut. Kamu dapat memuat seluruh file konfigurasi pada direktori dengan perintah <code class="highlighter-rouge">loadDir($directory)</code>.</p>

<p>Pada contoh dibawah ini, dimisalkan kita memiliki 2 buah file konfigurasi pada direktori ‘configs’ sebagai berikut:</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="c1">// file configs/app.php
</span><span class="k">return</span> <span class="p">[</span>
    <span class="s1">'base_url'</span> <span class="o">=&gt;</span> <span class="s1">'http://localhost:3000'</span><span class="p">,</span>
    <span class="s1">'debug'</span> <span class="o">=&gt;</span> <span class="kc">true</span>
<span class="p">];</span>
</code></pre>
</div>

<div class="language-php highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="c1">// file configs/database.php
</span><span class="k">return</span> <span class="p">[</span>
    <span class="s1">'host'</span> <span class="o">=&gt;</span> <span class="s1">'localhost'</span><span class="p">,</span>
    <span class="s1">'username'</span> <span class="o">=&gt;</span> <span class="s1">'root'</span><span class="p">,</span>
    <span class="s1">'password'</span> <span class="o">=&gt;</span> <span class="s1">'s3cR3t'</span><span class="p">,</span>
    <span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'my_db'</span>
<span class="p">];</span>
</code></pre>
</div>

<p>Untuk mendaftarkan konfigurasi pada direktori ‘configs’ tersebut, gunakan perintah <code class="highlighter-rouge">loadDir</code>seperti dibawah ini:</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="c1">// file index.php
</span>
<span class="k">use</span> <span class="nx">Rakit\Framework\App</span><span class="p">;</span>

<span class="k">require</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">App</span><span class="p">(</span><span class="s1">'my-awesome-app'</span><span class="p">);</span>

<span class="c1">// load configs
</span><span class="nv">$app</span><span class="o">-&gt;</span><span class="na">config</span><span class="o">-&gt;</span><span class="na">loadDir</span><span class="p">(</span><span class="nx">__DIR__</span><span class="o">.</span><span class="s1">'/configs'</span><span class="p">);</span>

<span class="c1">// then here is the results
</span><span class="k">echo</span> <span class="nv">$app</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">'app.base_url'</span><span class="p">];</span>        <span class="c1">// http://localhost:3000
</span><span class="k">echo</span> <span class="nv">$app</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">'app.debug'</span><span class="p">];</span>           <span class="c1">// 1 (true)
</span><span class="k">echo</span> <span class="nv">$app</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">'database.host'</span><span class="p">];</span>       <span class="c1">// localhost
</span><span class="k">echo</span> <span class="nv">$app</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">'database.username'</span><span class="p">];</span>   <span class="c1">// root
</span><span class="k">echo</span> <span class="nv">$app</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">'database.password'</span><span class="p">];</span>   <span class="c1">// s3cR3t
</span><span class="k">echo</span> <span class="nv">$app</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">'database.name'</span><span class="p">];</span>       <span class="c1">// my_db
</span></code></pre>
</div>

<p>Ya, nama file akan menjadi prefix dari masing-masing konfigurasi.</p>

<p><a id="config-debug"></a></p>
<h4 id="mengaktifkan-mode-debug"><a href="#config-debug">Mengaktifkan Mode Debug</a></h4>

<p>Secara default, rakit framework menonaktifkan mode debug. 
Jadi jika terjadi error, browser hanya akan menampilkan ‘Something went wrong’.</p>

<p>Untuk mengaktifkan mode debug, set konfigurasi <code class="highlighter-rouge">app.debug</code>menjadi <code class="highlighter-rouge">true</code>seperti dibawah ini:</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="c1">// file index.php
</span>
<span class="k">use</span> <span class="nx">Rakit\Framework\App</span><span class="p">;</span>

<span class="k">require</span><span class="p">(</span><span class="s1">'vendor/autoload.php'</span><span class="p">);</span>

<span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">App</span><span class="p">(</span><span class="s1">'my-awesome-app'</span><span class="p">);</span>
<span class="nv">$app</span><span class="o">-&gt;</span><span class="na">config</span><span class="p">[</span><span class="s1">'app.debug'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</code></pre>
</div>

<p>Dengan begitu, jika terjadi error, aplikasi akan menampilkan sesuatu seperti ini:</p>

<p><img src="/assets/img/sample-error.png" alt="Sample error" /></p>

<p><a id="routing"></a></p>
<h2 id="routing"><a href="#routing">Routing</a></h2>

<p>Berikut ini method yang dapat kamu gunakan untuk mendaftarkan route:</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code>$app-&gt;get('/get', function() {
    return 'Hanya dapat menerima metode GET';
});

$app-&gt;post('/post', function() {
    return 'Hanya dapat menerima metode POST';
});

$app-&gt;put('/put', function() {
    return 'Hanya dapat menerima metode PUT';
});

$app-&gt;patch('/patch', function() {
    return 'Hanya dapat menerima metode PATCH';
});

$app-&gt;delete('/delete', function() {
    return 'Hanya dapat menerima metode DELETE';
});

// mendaftarkan beberapa method sekaligus pada sebuah route
$app-&gt;router-&gt;map(['GET', 'POST', 'PUT'], '/some-methods', function() {
    return 'Route ini dapat menerima metode GET, POST, dan PUT';
});
</code></pre>
</div>

<blockquote>
  <p>Catatan: Setiap route pada rakit framework harus diawali dengan ‘/’</p>
</blockquote>

<p>Untuk mendaftarkan parameter pada route, gunakan <code class="highlighter-rouge">:nama_parameter</code>seperti kode berikut:</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code>$app-&gt;get('/user/:username', function($username) {
    return "Halo $username";
});
</code></pre>
</div>

<p>Kode diatas memungkinkan kamu untuk mengakses ‘/user/foo’, ‘/user/123’, ‘/user/foo123’, dsb.</p>

<p>Gunakan tanda kurung pada path dan parameter yang ingin dijadikan optional, lalu set nilai default pada argumen parameter tersebut.</p>

<p>Contoh:</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code>$app-&gt;get('/user(/:username)', function($username = 'Anonymous') {
    return "Halo $username";
});
</code></pre>
</div>

<blockquote>
    <small>
        Jika tanda '/' pada `(/:username)`ditaruh diluar menjadi seperti `/user/(:username)`
        maka route tersebut tidak menerima '/user', melainkan harus '/user/'. 
    </small>
</blockquote>

<p>Secara default, parameter akan menerima karakter apapun selain ‘/’. 
Jika kamu mengiginkan parameter hanya dapat menerima karakter tertentu, kamu bisa menambahkan <code class="highlighter-rouge">-&gt;where('param', 'regex')</code>
setelah mendefinisikan route.</p>

<p>Contoh:</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code>$app-&gt;get('/user/:username', function() {
    return "Halo $username";
})-&gt;where('username', '[a-zA-Z0-9]+');
</code></pre>
</div>

<p>Dengan begitu route hanya akan dianggap cocok jika parameter ‘username’ terdiri dari rangkaian huruf dan angka (a-z, 0-9).
Bila tidak, aplikasi akan menampilkan halaman 404.</p>

<p>Route group digunakan untuk mengelompokan route kamu sehingga lebih mudah dibaca dan dimaintain jika sewaktu-waktu ada perubahan pada path atau middleware group tersebut.</p>

<p>Contoh menggunakan route group:</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code>$app-&gt;group('/admin', function($admin) {
    $admin-&gt;get('/dashboard', function() {
        return 'Halaman dashboard';
    });

    $admin-&gt;get('/settings', function() {
        return 'Halaman pengaturan';
    });

    $admin-&gt;post('/settings', function() {
        return 'Menyimpan pengaturan';
    });
});
</code></pre>
</div>

<p>Pada kode diatas, kita mendaftarkan 3 buah route, yaitu:</p>

<ul>
  <li>GET ‘/admin/dashboard’</li>
  <li>GET ‘/admin/settings’</li>
  <li>POST ‘/admin/settings’</li>
</ul>

<p><a id="middleware"></a></p>
<h2 id="middleware"><a href="#middleware">Middleware</a></h2>

<p>Middleware adalah sebuah fungsi yang melapisi controller, atau middleware pada lapisan dibawahnya.
Middleware dapat digunakan untuk filter request, manipulasi response, setup beberapa hal, dsb.</p>

<p>Middleware pada rakit framework sendiri hanya dapat didaftarkan pada route atau route group.</p>

<p>Berikut contoh-contoh penggunaan middleware:</p>

<p><a id="middleware-filtering"></a></p>
<h4 id="middleware-untuk-filter-request"><a href="#middleware-filtering">Middleware untuk Filter Request</a></h4>

<p>Ini adalah fungsi yang paling umum dari middleware. Yaitu untuk autentikasi dan autorisasi.</p>

<p>Pada contoh dibawah ini kita akan membuat middleware ‘auth’ yang berfungsi untuk mengecek
apakah user sudah login atau belum berdasarkan session. 
Jika belum, maka tampilkan respon 401 (Unauthenticated request).</p>

<p>Pertama kamu perlu mendaftarkan middleware ‘auth’ tersebut:</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code>$app-&gt;setMiddleware('auth', function($req, $res, $next) {
    if (!isset($_SESSION['user_id'])) {
        return $res-&gt;send('Unauthenticated request', 401);
    }

    return $next();
});
</code></pre>
</div>

<p>Setelah itu, middleware ‘auth’ tersebut dapat kamu gunakan 
pada route atau route group seperti ini:</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code>// mendaftarkan middleware pada route 
$app-&gt;get('/article/edit', 'ArticleController@formEdit')-&gt;auth();

// mendaftarkan middleware pada route group
$app-&gt;group('/admin', function($admin) {
    $admin-&gt;get('/article', 'ArticleController@pageIndex');
    $admin-&gt;get('/article/create', 'ArticleController@formCreate');
    $admin-&gt;post('/article/create', 'ArticleController@postCreate');
})-&gt;auth();
</code></pre>
</div>

<p>Pada contoh diatas, middleware ‘auth’ akan melapisi controller didalamnya, dan dijalankan terlebih dahulu
sebelum controller. Middleware tersebut akan mengecek apakah terdapat session ‘user_id’ atau tidak.
Jika tidak ada, aplikasi akan menampilkan ‘Unauthenticated Request’ dengan status 401.
Jika ada, middleware akan meneruskan request ke controller (lapisan dibawahnya) dengan perintah <code class="highlighter-rouge">$next()</code>.</p>

<blockquote>
  <p>Perlu diingat kalau middleware dan controller pada rakit framework selalu menggunakan <code class="highlighter-rouge">return</code>untuk
  mengembalikan hasil.</p>
</blockquote>

<p><a id="middleware-manipulate"></a></p>
<h4 id="middleware-untuk-manipulasi-response"><a href="#middleware-manipulate">Middleware untuk Manipulasi Response</a></h4>

<p>Terkadang kamu mungkin mau mengubah respon atau hasil yang dikirimkan oleh controller seperti menghapus karakter ilegal,
replace sesuatu, menginsert sesuatu ke JSON yang dihasilkan, dsb.</p>

<p>Pada contoh berikut ini kita akan membuat middleware ‘api’ yang berguna untuk menambahkan ‘status’ ke dalam JSON.</p>

<p>1) Mendaftarkan middleware:</p>
<div class="language-php highlighter-rouge"><pre class="highlight"><code>$app-&gt;setMiddleware('api', function($req, $res, $next) {
    $result = $next();
    return array_merge([
      'status' =&gt; 'ok'
    ], $result);
});
</code></pre>
</div>

<p>2) Mendaftarkan middleware ke route.</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code>$app-&gt;get('/api/something', function() {
    return [
        'message' =&gt; 'Hola!'
    ];
})-&gt;api();
</code></pre>
</div>

<p>Pada contoh diatas, jika kamu mengakses ‘/api/something’ maka hasilnya adalah JSON sebagai berikut:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="p">{</span>
    <span class="s2">"status"</span><span class="err">:</span> <span class="s2">"ok"</span><span class="p">,</span>
    <span class="s2">"message"</span><span class="err">:</span> <span class="s2">"Hola!"</span>
<span class="p">}</span>
</code></pre>
</div>

<p><a id="middleware-parameter"></a></p>
<h4 id="middleware-dengan-parameter"><a href="#middleware-parameter">Middleware dengan Parameter</a></h4>

<p>Seringkali kita mendapatkan kasus dimana aplikasi yang kita kembangkan memiliki berbagai macam kategori user, seperti ‘admin’, ‘guru’, ‘murid’.
Jika kamu ingin membuat middleware untuk autentikasi 3 kategori user tersebut, terdapat 2 cara, yaitu:</p>

<ol>
  <li>Buat 3 buah middleware untuk masing-masing kategori.</li>
  <li>Cukup buat sebuah middleware yang menerima parameter.</li>
</ol>

<p>Berikut contoh penggunaan middleware dengan parameter untuk kasus tersebut:</p>

<p>1) Mendaftarkan middleware. Tambahkan parameter <code class="highlighter-rouge">$category</code>pada akhir <code class="highlighter-rouge">Closure</code>.</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code>$app-&gt;setMiddleware('auth', function($req, $res, $next, $category) {
    // cek apakah user sudah login
    if (!isset($_SESSION['user']) OR !is_array($_SESSION['user'])) {
        return $res-&gt;send('Anda belum login', 401);
    }

    // cek apakah kategori user sesuai $category
    if ($_SESSION['user']['category'] != $category) {
        return $res-&gt;send('Anda tidak memiliki hak akses ke halaman ini', 403);
    }

    return $next();
});
</code></pre>
</div>

<p>2) Mendaftarkan middleware ke route. Masukkan parameter ke middleware <code class="highlighter-rouge">auth</code>yang telah dibuat.</p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code>$app-&gt;get('/admin/dashboard', function() {
    return "Halo admin";
})-&gt;auth('admin');

$app-&gt;get('/guru/dashboard', function() {
    return "Halo guru";
})-&gt;auth('guru');

$app-&gt;get('/murid/dashboard', function() {
    return "Halo Murid";
})-&gt;auth('murid');
</code></pre>
</div>
<p><a id="request"></a></p>
<h2 id="request"><a href="#request">Request</a></h2>

<p>TODO: write this
<a id="response"></a></p>
<h2 id="response"><a href="#response">Response</a></h2>

<p>TODO: write this
<a id="container"></a></p>
<h2 id="container"><a href="#container">Container</a></h2>

<p>TODO: write this</p>


          </div>
        </div>
      </div>
    </div>
  </main>
  <footer>
    <div class="container">
      &copy; 2016 Rakit Framework <span class="text-muted">|</span> <a href="https://github.com/rakit/framework">github</a>
    </div>
  </footer>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>
</body>
</html>