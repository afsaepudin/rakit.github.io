<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no"/>
  <meta name="theme-color" content="#ffffff"/>
  <meta name="description" content="Another yet PHP micro framework that help you build web app or web service with ease." />
  <meta name="ogUrl" property="og:url" content="https://rakit.github.com/documentation.html" />
  <meta name="ogType" property="og:type" content="article" />
  <meta name="ogTitle" property="og:title" content="Rakit Framework - Documentation" />
  <meta name="ogDescription" property="og:description" content="Another yet PHP micro framework that help you build web app or web service with ease." />
  <meta name="ogImage" property="og:image" content="https://rakit.github.io/assets/img/fb-cover.png" />

  <title>Rakit Framework - Dokumentasi</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css">
  <link rel="stylesheet" href="/assets/css/style.css">
</head>
<body class="page-with-navbar">
  <header class="navbar">
    <div class="container">
      <a href="index.html" class="navbar-brand">
        <img src="/assets/img/logo-navbar.png">
      </a>
      <div class="navbar-right">
        <ul class="navbar-menu">
          <li><a href="index.html">Beranda</a></li>
          <li class="active"><a href="documentation.html">Dokumentasi</a></li>
          <li><a href="https://github.com/rakit/framework" target="_blank">Github</a></li>
        </ul>
      </div>
    </div>
  </header>
  <main>
    <div class="container">
      <div class="row">
        <div class="three columns">
          <ul class="nav main-nav">
            <li>
              <a href="/documentation.html"><small>English please?</small></a>
            </li>
            <li class="header">Memulai</li>
            <li>
              <a href="#requirements">Kebutuhan</a>
            </li>
            <li>
              <a href="#installation">Instalasi</a>
            </li>
            <li>
              <a href="#hello-world">Hello World</a>
            </li>
            <li class="header">Panduan</li>
            <li>
              <a href="#routing">Routing</a>
            </li>
            <li>
              <a href="#middleware">Middleware</a>
            </li>
            <li>
              <a href="#request">Request</a>
            </li>
            <li>
              <a href="#response">Response</a>
            </li>
            <li>
              <a href="#container">Container</a>
            </li>
            <li class="header">Tambahan</li>
            <li>
              <a href="https://github.com/rakit/validation" target="_blank">Validation</a>
            </li>
            <li>
              <a href="https://github.com/rakit/session" target="_blank">Session Manager</a>
            </li>
            <li>
              <a href="https://github.com/rakit/blade" target="_blank">View Blade</a>
            </li>
            <li>
              <a href="https://github.com/emsifa/Block" target="_blank">View Block</a>
            </li>
          </ul>
        </div>
        <div class="nine columns">
          <div class="content">
            <section id="getting-started">
              <h1>Memulai</h1>

              <!-- REUQUIREMENTS -->
              <h2 id="requirements">
                <a href="#requirements">Kebutuhan</a>
              </h2>
              <ul>
                <li>PHP 5.5 keatas.</li>
                <li><a href="https://getcomposer.org/" target="_blank">Composer</a> untuk instalasi</li>
              </ul>

              <!-- INSTALLATION -->
              <h2 id="installation">
                <a href="#installation">Instalasi</a>
              </h2>
              <p>
                Pertama-tama, siapkan direktori proyekmu:
              </p>
              <pre><code class="bash">cd /var/www
mkdir my-project</code></pre>
              <p>
                Setelah itu, install rakit framework menggunakan perintah composer dibawah ini:      
              </p>
              <pre><code class="bash">composer require "rakit/framework"</code></pre>
             
              <!-- HELLO-WORLD -->
              <h2 id="hello-world">
                <a href="#hello-world">Hello World</a>
              </h2>
              <p>
                Buat file index.php, lalu ketikkan kode berikut:
              </p>
              <pre><code class="php enable-line-number">&lt;?php
        
use Rakit\Framework\App;

require("vendor/autoload.php");

// inisialisasi App
$app = new App('my-awesome-app');

// mendaftarkan route
$app->get('/', function() {
    return "Hello World!";
});

// menjalankan app
$app->run();</code></pre>
              <p>
                Jalankan server (disini kami menggunakan PHP built-in server):
              </p>
              <pre><code class="bash">php -S localhost:8000</code></pre>
              <p>
                Kemudian buka 'http://localhost:8000' pada web browser, dan voila!
              </p>

            </section>
            <section id="getting-started">
              <h1>Panduan</h1>

              <!-- ROUTING -->
              <h2 id="routing">
                <a href="#routing">Routing</a>
              </h2>
              <p>
                Berikut ini method yang dapat kamu gunakan untuk mendaftarkan route:
              </p>
              <pre><code class="php">$app->get('/get', function() {
    return 'Hanya dapat menerima metode GET';
});

$app->post('/post', function() {
    return 'Hanya dapat menerima metode POST';
});

$app->put('/put', function() {
    return 'Hanya dapat menerima metode PUT';
});

$app->patch('/patch', function() {
    return 'Hanya dapat menerima metode PATCH';
});

$app->delete('/delete', function() {
    return 'Hanya dapat menerima metode DELETE';
});

// mendaftarkan beberapa method sekaligus pada sebuah route
$app->map(['GET', 'POST', 'PUT'], '/some-methods', function() {
    return 'Route ini dapat menerima metode GET, POST, dan PUT';
});</code></pre>
              <blockquote class="warning">
                Catatan: Setiap route pada rakit framework harus diawali dengan '/'
              </blockquote>

              <!-- ROUTING:ROUTE-PARAMETER -->
              <h4 id="route-parameter"><a href="#route-parameter">Route Parameter</a></h4>
              <p>
                Untuk mendaftarkan parameter pada route, gunakan <code>:nama_parameter</code> seperti kode berikut:
              </p>
              <pre><code class="php">$app->get('/user/:username', function($username) {
    return "Halo $username";
});</code></pre>
              <p>
                Kode diatas memungkinkan kamu untuk mengakses '/user/foo', '/user/123', '/user/foo123', dsb.
              </p>

              <!-- ROUTING:ROUTE-OPTIONAL-PARAMETER -->
              <h4 id="route-optional-parameter"><a href="#route-optional-parameter">Route Optional Parameter</a></h4>
              <p>
                Gunakan tanda kurung pada path dan parameter yang ingin dijadikan optional, lalu set nilai default pada argumen parameter tersebut.
                Contoh:
              </p>
              <pre><code class="php">$app->get('/user(/:username)', function($username = 'Anonymous') {
    return "Halo $username";
});</code></pre>
              <blockquote>
                <small>
                  Jika tanda '/' pada <code>(/:username)</code> ditaruh diluar menjadi seperti <code>/user/(:username)</code> 
                  maka route tersebut tidak menerima '/user', melainkan harus '/user/'. 
                </small>
              </blockquote>

              <!-- ROUTING:ROUTE-GROUP -->
              <h4 id="route-group"><a href="#route-group">Route Group</a></h4>
              <p>
                Route group digunakan untuk mengelompokan route kamu sehingga lebih mudah dibaca dan dimaintain jika sewaktu-waktu ada perubahan pada path atau middleware group tersebut.
              </p>
              <p>
                Contoh menggunakan route group:
              </p>
              <pre><code class="php">$app->group('/admin', function($admin) {
    $admin->get('/dashboard', function() {
        return 'Halaman dashboard';
    });

    $admin->get('/settings', function() {
        return 'Halaman pengaturan';
    });

    $admin->post('/settings', function() {
        return 'Menyimpan pengaturan';
    });
});</code></pre>
              <p>
                Pada kode diatas, kita mendaftarkan 3 buah route, yaitu:
              </p>
              <ul>
                <li>GET '/admin/dashboard'</li>                
                <li>GET '/admin/settings'</li>                
                <li>POST '/admin/settings'</li>                
              </ul>

              <!-- MIDDLEWARE -->
              <h2 id="middleware">
                <a href="#middleware">Middleware</a>
              </h2>
              <p>
                Middleware adalah sebuah fungsi yang melapisi controller, atau middleware pada lapisan dibawahnya.
                Middleware dapat digunakan untuk filter request, manipulasi response, setup beberapa hal, dsb.
              </p>
              <p>
                Middleware pada rakit framework sendiri hanya dapat didaftarkan pada route atau route group.
                Berikut contoh-contoh penggunaan middleware:
              </p>
              <!-- MIDDLEWARE:FILTERING -->
              <h4 id="middleware-filtering">
                <a href="#middleware-filtering">Middleware untuk Filter Request</a>
              </h4>
              <p>
                Ini adalah fungsi yang paling umum dari middleware. Yaitu untuk autentikasi dan autorisasi.
                Pada contoh dibawah ini kita akan membuat middleware 'auth' yang berfungsi untuk mengecek
                apakah user sudah login atau belum berdasarkan session. 
                Jika belum, maka tampilkan respon 401 (Unauthenticated request).
              </p>
              <p>
                Pertama kamu perlu mendaftarkan middleware 'auth' tersebut:
              </p>
              <pre><code class="php">$app->middleware('auth', function($req, $res, $next) {
    if (!isset($_SESSION['user_id'])) {
        return $res->send('Unauthenticated request', 401);
    }

    return $next();
});</code></pre>
              <p>
                Setelah itu, middleware 'auth' tersebut dapat kamu gunakan 
                pada route atau route group seperti ini:
              </p>
              <pre><code class="php">// mendaftarkan middleware pada route 
$app->get('/article/edit', 'ArticleController@formEdit')->auth();

// mendaftarkan middleware pada route group
$app->group('/admin', function($admin) {
    $admin->get('/article', 'ArticleController@pageIndex');
    $admin->get('/article/create', 'ArticleController@formCreate');
    $admin->post('/article/create', 'ArticleController@postCreate');
})->auth();</code></pre>
              <p>
                Pada contoh diatas, middleware 'auth' akan melapisi controller didalamnya, dan dijalankan terlebih dahulu
                sebelum controller. Middleware tersebut akan mengecek apakah terdapat session 'user_id' atau tidak.
                Jika tidak ada, aplikasi akan menampilkan 'Unauthenticated Request' dengan status 401.
                Jika ada, middleware akan meneruskan request ke controller (lapisan dibawahnya) dengan perintah <code>$next()</code>.
              </p>
              <blockquote>
                Perlu diingat kalau middleware dan controller pada rakit framework selalu menggunakan <code>return</code> untuk
                mengembalikan hasil.
              </blockquote>

              <!-- MIDDLEWARE:MANIPULATE-RESPONSE -->
              <h4 id="middleware-manipulate">
                <a href="#middleware-manipulate">Middleware untuk Manipulasi Response</a>
              </h4>
              <p>
                Terkadang kamu mungkin mau mengubah respon atau hasil yang dikirimkan oleh controller seperti menghapus karakter ilegal,
                replace sesuatu, menginsert sesuatu ke JSON yang dihasilkan, dsb.
              </p>
              <p>
                Pada contoh berikut ini kita akan membuat middleware 'api' yang berguna untuk menambahkan 'status' ke dalam JSON.
              </p>
              <p>
                1. Mendaftarkan middleware:
              </p>
              <pre><code class="php">$app->middleware('api', function($req, $res, $next) {
    $result = $next();
    return array_merge([
      'status' => 'ok'
    ], $result);
});</code></pre>
              <p>
                2. Mendaftarkan middleware ke route.
              </p>
              <pre><code class="php">$app->get('/api/something', function() {
    return [
        'message' => 'Hola!'
    ];
})->api();</code></pre>
              <p>
                Pada contoh diatas, jika kamu mengakses '/api/something' maka hasilnya adalah JSON sebagai berikut:
              </p>
              <pre><code class="javascript">{
    "status": "ok",
    "message": "Hola!"
}</code></pre>

              <h2 id="request">
                <a href="#request">Request</a>
              </h2>
              <p>
                TODO: write this
              </p>
              <h2 id="response">
                <a href="#response">Response</a>
              </h2>
              <p>
                TODO: write this
              </p>
              <h2 id="container">
                <a href="#container">Container</a>
              </h2>
              <p>
                TODO: write this
              </p>
            </section>
          </div>
        </div>
      </div>
    </div>
  </main>
  <footer>
    <div class="container">
      &copy; 2016 Rakit Framework <span class="text-muted">|</span> <a href="https://github.com/rakit/framework">github</a>
    </div>
  </footer>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>

</body>
</html>