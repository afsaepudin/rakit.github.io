<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no"/>
  <meta name="theme-color" content="#ffffff"/>
  <meta name="description" content="Yet another PHP micro framework to help you build web app or web service with ease." />
  <meta name="ogUrl" property="og:url" content="https://rakit.github.com/documentation.html" />
  <meta name="ogType" property="og:type" content="article" />
  <meta name="ogTitle" property="og:title" content="Rakit Framework - Documentation" />
  <meta name="ogDescription" property="og:description" content="Yet another PHP micro framework to help you build web app or web service with ease." />
  <meta name="ogImage" property="og:image" content="https://rakit.github.io/assets/img/fb-cover.png" />

  <title>Rakit Framework - Dokumentasi</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css">
  <link rel="stylesheet" href="/assets/css/style.min.css">
</head>
<body class="page-with-navbar documentation">
  <header class="navbar">
    <div class="container">
      <a href="index.html" class="navbar-brand">
        <img src="/assets/img/logo-navbar.png">
      </a>
      <div class="navbar-right">
        <ul class="navbar-menu">
          <li><a href="index.html">Beranda</a></li>
          <li class="active"><a href="documentation.html">Dokumentasi</a></li>
          <li><a href="https://github.com/rakit/framework" target="_blank">Github</a></li>
        </ul>
      </div>
    </div>
  </header>
  <main>
    <div class="container">
      <div class="row">
        <div class="three columns">
          <ul class="nav main-nav">
            <li>
              <a href="/documentation.html"><small>English please?</small></a>
            </li>
            <li class="header"><a href="#getting-started">Memulai</a></li>
            <li>
              <a href="#requirements">Kebutuhan</a>
            </li>
            <li>
              <a href="#installation">Instalasi</a>
            </li>
            <li>
              <a href="#hello-world">Hello World</a>
            </li>
            <li class="header"><a href="#guide">Panduan</a></li>
            <li>
              <a href="#configuration">Konfigurasi</a>
            </li>
            <li>
              <a href="#routing">Routing</a>
            </li>
            <li>
              <a href="#middleware">Middleware</a>
            </li>
            <li>
              <a href="#request">Request</a>
            </li>
            <li>
              <a href="#response">Response</a>
            </li>
            <li>
              <a href="#container">Container</a>
            </li>
            <li class="header"><a href="#">Tambahan</a></li>
            <li>
              <a href="https://github.com/rakit/validation" target="_blank">Validation</a>
            </li>
            <li>
              <a href="https://github.com/rakit/session" target="_blank">Session Manager</a>
            </li>
            <li>
              <a href="https://github.com/rakit/blade" target="_blank">View Blade</a>
            </li>
            <li>
              <a href="https://github.com/emsifa/Block" target="_blank">View Block</a>
            </li>
          </ul>
        </div>
        <div class="nine columns">
          <div class="content">
            <blockquote class="info font-small">
              <h5><strong>CATATAN</strong></h5>
              Berikut beberapa hal yang perlu kamu ketahui pada penulisan dokumentasi ini:
              <ul class="no-margin">
                <li>
                  Beberapa code snippet pada dokumentasi ini menyertakan <code>...</code>, 
                  maksudnya adalah pada bagian tersebut dapat berisi "kode lain" yang tidak berhubungan dengan topik yang dibahas.
                  Kamu tidak perlu menuliskan <code>...</code> seperti itu.
                </li>
                <li>
                  Kata 'Controller' pada dokumentasi disini maksudnya adalah 'Route handler' yang dapat berupa <em>callable</em>
                  atau class Controller.
                </li>
              </ul>
            </blockquote>
            <section id="getting-started">
              <h1>Memulai</h1>

              <!-- REUQUIREMENTS -->
              <h2 id="requirements">
                <a href="#requirements">Kebutuhan</a>
              </h2>
              <ul>
                <li>PHP 5.5 keatas.</li>
                <li><a href="https://getcomposer.org/" target="_blank">Composer</a> untuk instalasi</li>
              </ul>

              <!-- INSTALLATION -->
              <h2 id="installation">
                <a href="#installation">Instalasi</a>
              </h2>
              <p>
                Pertama-tama, siapkan direktori proyekmu:
              </p>
              <pre><code class="bash">cd /var/www
mkdir my-project</code></pre>
              <p>
                Setelah itu, install rakit framework menggunakan perintah composer dibawah ini:      
              </p>
              <pre><code class="bash">composer require "rakit/framework"</code></pre>
             
              <!-- HELLO-WORLD -->
              <h2 id="hello-world">
                <a href="#hello-world">Hello World</a>
              </h2>
              <p>
                Buat file index.php, lalu ketikkan kode berikut:
              </p>
              <pre><code class="php enable-line-number">&lt;?php
        
use Rakit\Framework\App;

require("vendor/autoload.php");

// inisialisasi App
$app = new App('my-awesome-app');

// mendaftarkan route
$app->get('/', function() {
    return "Hello World!";
});

// menjalankan app
$app->run();</code></pre>
              <p>
                Jalankan server (disini kami menggunakan PHP built-in server):
              </p>
              <pre><code class="bash">php -S localhost:8000</code></pre>
              <p>
                Kemudian buka 'http://localhost:8000' pada web browser, dan voila!
              </p>
            </section>
            <section id="guide">
              <h1>Panduan</h1>

              <!-- CONFIGURATION -->
              <h2 id="configuration">
                <a href="#configuration">Konfigurasi</a>
              </h2>
              <p>
                Rakit framework pada dasarnya dapat berjalan tanpa konfigurasi apapun.
                Namun seringkali kita ingin menyimpan beberapa pengaturan pada aplikasi,
                Rakit framework menyajikan beberapa API untuk mempermudah hal tersebut. 
              </p>
              <p>
                Berikut adalah beberapa hal yang mesti kamu ketahui tentang konfigurasi pada Rakit framework:  
              </p>

              <!-- CONFIGURATION:GET-SET -->
              <h4 id="config-get-set">
                <a href="#config-get-set">Get/Set Konfigurasi</a>
              </h4>
              <p>
                Konfigurasi pada rakit framework tersimpan pada objek <code>config</code> 
                yang mengimplementasikan <code>ArrayAccess</code>. 
                Untuk itu, kamu dapat menyimpan dan mengambil konfigurasi layaknya memberikan dan mengambil nilai dari array.
                Berikut contohnya:
              </p>
              <pre><code class="php">// set konfigurasi 'something'
$app->config['something'] = 'value';

// mengambil konfigurasi 'something'
echo $app->config['something'];
</code></pre>
              <!-- CONFIGURATION:DOT-NOTATION -->
              <h4 id="config-dot-notation">
                <a href="#config-dot-notation">Memahami Dot Notation pada Konfigurasi</a>
              </h4>
              <p>
                Perlu kamu ketahui, rakit framework memiliki kemampuan untuk mengambil konfigurasi dengan dot notation.
                Jika pada array biasa kamu melakukan hal seperti ini:
              </p>
              <pre><code class="php">$configs['database'] = [
    'host' => 'localhost',
    'username' => 'root',
    'password' => 's3cR3t',
    'name' => 'my_db'
];

...

// mengambil konfigurasi (pada file lain)
$db_host = isset($configs['database']['host'])? $configs['database']['host'] : 'localhost';
$db_username = isset($configs['database']['username'])? $configs['database']['username'] : 'root';
$db_password = isset($configs['database']['password'])? $configs['database']['password'] : '';</code></pre>
              <p>
                Dengan rakit framework, kode diatas akan jadi seperti ini'
              </p>
              <pre><code class="php">$app->config['database'] = [
    'host' => 'localhost',
    'username' => 'root',
    'password' => 's3cR3t',
    'name' => 'my_db'
];

...

// mengambil konfigurasi (pada file lain)
$db_host = $app->config['database.host'] ?: 'localhost';
$db_username = $app->config['database.username'] ?: 'root';
$db_password = $app->config['database.password'] ?: '';</code></pre>
              <p>
                Lebih enak dipandang bukan? ya itulah kegunaan dot notation. Untuk meminimalisir isset-isset itu.
              </p>
              <blockquote>
                Jika kunci (key) yang diakses dengan dot notation tidak ada, nilai yang dikembalikan adalah <code>null</code>
              </blockquote>

              <!-- CONFIGURATION:LOAD-DIR -->
              <h4 id="config-load-dir">
                <a href="#config-load-dir">Load Konfigurasi pada Direktori</a>
              </h4>
              <p>
                Jika kamu pernah menggunakan framework-framework full stack seperti Laravel, Codeigniter, dsb kamu
                akan menemukan kalau file konfigurasi dikumpulkan kedalam sebuah direktori yang dikelompokkan kedalam file.
                Rakit framework memfasilitasi hal tersebut. Kamu dapat memuat seluruh file konfigurasi pada direktori dengan perintah <code>loadDir($directory)</code>.
              </p>
              <p>
                Pada contoh dibawah ini, dimisalkan kita memiliki 2 buah file konfigurasi pada direktori 'configs' sebagai berikut:
              </p>
              <pre><code class="php">&lt;?php
// file configs/app.php
return [
    'base_url' => 'http://localhost:3000',
    'debug' => true
];
</code></pre>
               <pre><code class="php">&lt;?php
// file configs/database.php
return [
    'host' => 'localhost',
    'username' => 'root',
    'password' => 's3cR3t',
    'name' => 'my_db'
];
</code></pre>
              <p>
                Untuk mendaftarkan konfigurasi pada direktori 'configs' tersebut, gunakan perintah <code>loadDir</code> seperti dibawah ini:
              </p>
              <pre><code class="php">&lt;?php
// file index.php

use Rakit\Framework\App;

require('vendor/autoload.php');

$app = new App('my-awesome-app');

// load configs
$app->config->loadDir(__DIR__.'/configs');

// then here is the results
echo $app->config['app.base_url'];        // http://localhost:3000
echo $app->config['app.debug'];           // 1 (true)
echo $app->config['database.host'];       // localhost
echo $app->config['database.username'];   // root
echo $app->config['database.password'];   // s3cR3t
echo $app->config['database.name'];       // my_db
</code></pre>
              <p>
                Ya, nama file akan menjadi prefix dari masing-masing konfigurasi.
              </p>

              <!-- CONFIGURATION:DEBUG -->
              <h4 id="config-debug">
                <a href="#config-debug">Mengaktifkan Mode Debug</a>
              </h4>
              <p>
                Secara default, rakit framework menonaktifkan mode debug. 
                Jadi jika terjadi error, browser hanya akan menampilkan 'Something went wrong'.
                Untuk mengaktifkan mode debug, set konfigurasi <code>app.debug</code> menjadi <code>true</code> seperti dibawah ini:
              </p>
              <pre><code class="php">&lt;?php
// file index.php

use Rakit\Framework\App;

require('vendor/autoload.php');

$app = new App('my-awesome-app');
$app->config['app.debug'] = true;

</code></pre> 
              <p>
                Dengan begitu, jika terjadi error, aplikasi akan menampilkan sesuatu seperti ini:
              </p>
              <img src="/assets/img/sample-error.png" alt="Sample error">


              <h2 id="routing">
                <a href="#routing">Routing</a>
              </h2>
              <p>
                Berikut ini method yang dapat kamu gunakan untuk mendaftarkan route:
              </p>
              <pre><code class="php">$app->get('/get', function() {
    return 'Hanya dapat menerima metode GET';
});

$app->post('/post', function() {
    return 'Hanya dapat menerima metode POST';
});

$app->put('/put', function() {
    return 'Hanya dapat menerima metode PUT';
});

$app->patch('/patch', function() {
    return 'Hanya dapat menerima metode PATCH';
});

$app->delete('/delete', function() {
    return 'Hanya dapat menerima metode DELETE';
});

// mendaftarkan beberapa method sekaligus pada sebuah route
$app->router->map(['GET', 'POST', 'PUT'], '/some-methods', function() {
    return 'Route ini dapat menerima metode GET, POST, dan PUT';
});</code></pre>
              <blockquote class="warning">
                Catatan: Setiap route pada rakit framework harus diawali dengan '/'
              </blockquote>

              <!-- ROUTING:ROUTE-PARAMETER -->
              <h4 id="route-parameter"><a href="#route-parameter">Route Parameter</a></h4>
              <p>
                Untuk mendaftarkan parameter pada route, gunakan <code>:nama_parameter</code> seperti kode berikut:
              </p>
              <pre><code class="php">$app->get('/user/:username', function($username) {
    return "Halo $username";
});</code></pre>
              <p>
                Kode diatas memungkinkan kamu untuk mengakses '/user/foo', '/user/123', '/user/foo123', dsb.
              </p>

              <!-- ROUTING:ROUTE-OPTIONAL-PARAMETER -->
              <h4 id="route-optional-parameter"><a href="#route-optional-parameter">Route Optional Parameter</a></h4>
              <p>
                Gunakan tanda kurung pada path dan parameter yang ingin dijadikan optional, lalu set nilai default pada argumen parameter tersebut.
                Contoh:
              </p>
              <pre><code class="php">$app->get('/user(/:username)', function($username = 'Anonymous') {
    return "Halo $username";
});</code></pre>
              <blockquote>
                <small>
                  Jika tanda '/' pada <code>(/:username)</code> ditaruh diluar menjadi seperti <code>/user/(:username)</code> 
                  maka route tersebut tidak menerima '/user', melainkan harus '/user/'. 
                </small>
              </blockquote>

              <!-- ROUTING:ROUTE-CONDITIONAL-PARAMETER -->
              <h4 id="route-conditional-parameter"><a href="#route-conditional-parameter">Route Conditional Parameter</a></h4>
              <p>
                Secara default, parameter akan menerima karakter apapun selain '/'. 
                Jika kamu mengiginkan parameter hanya dapat menerima karakter tertentu, kamu bisa menambahkan <code>->where('param', 'regex')</code>
                setelah mendefinisikan route. 
              </p>
              <p>
                Contoh:
              </p>
              <pre><code class="php">$app->get('/user/:username', function() {
    return "Halo $username";
})->where('username', '[a-zA-Z0-9]+');</code></pre>
              <p>
                Dengan begitu route hanya akan dianggap cocok jika parameter 'username' terdiri dari rangkaian huruf dan angka (a-z, 0-9).
                Bila tidak, aplikasi akan menampilkan halaman 404.
              </p>

              <!-- ROUTING:ROUTE-GROUP -->
              <h4 id="route-group"><a href="#route-group">Route Group</a></h4>
              <p>
                Route group digunakan untuk mengelompokan route kamu sehingga lebih mudah dibaca dan dimaintain jika sewaktu-waktu ada perubahan pada path atau middleware group tersebut.
              </p>
              <p>
                Contoh menggunakan route group:
              </p>
              <pre><code class="php">$app->group('/admin', function($admin) {
    $admin->get('/dashboard', function() {
        return 'Halaman dashboard';
    });

    $admin->get('/settings', function() {
        return 'Halaman pengaturan';
    });

    $admin->post('/settings', function() {
        return 'Menyimpan pengaturan';
    });
});</code></pre>
              <p>
                Pada kode diatas, kita mendaftarkan 3 buah route, yaitu:
              </p>
              <ul>
                <li>GET '/admin/dashboard'</li>                
                <li>GET '/admin/settings'</li>                
                <li>POST '/admin/settings'</li>                
              </ul>

              <!-- MIDDLEWARE -->
              <h2 id="middleware">
                <a href="#middleware">Middleware</a>
              </h2>
              <p>
                Middleware adalah sebuah fungsi yang melapisi controller, atau middleware pada lapisan dibawahnya.
                Middleware dapat digunakan untuk filter request, manipulasi response, setup beberapa hal, dsb.
              </p>
              <p>
                Middleware pada rakit framework sendiri hanya dapat didaftarkan pada route atau route group.
                Berikut contoh-contoh penggunaan middleware:
              </p>
              <!-- MIDDLEWARE:FILTERING -->
              <h4 id="middleware-filtering">
                <a href="#middleware-filtering">Middleware untuk Filter Request</a>
              </h4>
              <p>
                Ini adalah fungsi yang paling umum dari middleware. Yaitu untuk autentikasi dan autorisasi.
                Pada contoh dibawah ini kita akan membuat middleware 'auth' yang berfungsi untuk mengecek
                apakah user sudah login atau belum berdasarkan session. 
                Jika belum, maka tampilkan respon 401 (Unauthenticated request).
              </p>
              <p>
                Pertama kamu perlu mendaftarkan middleware 'auth' tersebut:
              </p>
              <pre><code class="php">$app->setMiddleware('auth', function($req, $res, $next) {
    if (!isset($_SESSION['user_id'])) {
        return $res->send('Unauthenticated request', 401);
    }

    return $next();
});</code></pre>
              <p>
                Setelah itu, middleware 'auth' tersebut dapat kamu gunakan 
                pada route atau route group seperti ini:
              </p>
              <pre><code class="php">// mendaftarkan middleware pada route 
$app->get('/article/edit', 'ArticleController@formEdit')->auth();

// mendaftarkan middleware pada route group
$app->group('/admin', function($admin) {
    $admin->get('/article', 'ArticleController@pageIndex');
    $admin->get('/article/create', 'ArticleController@formCreate');
    $admin->post('/article/create', 'ArticleController@postCreate');
})->auth();</code></pre>
              <p>
                Pada contoh diatas, middleware 'auth' akan melapisi controller didalamnya, dan dijalankan terlebih dahulu
                sebelum controller. Middleware tersebut akan mengecek apakah terdapat session 'user_id' atau tidak.
                Jika tidak ada, aplikasi akan menampilkan 'Unauthenticated Request' dengan status 401.
                Jika ada, middleware akan meneruskan request ke controller (lapisan dibawahnya) dengan perintah <code>$next()</code>.
              </p>
              <blockquote>
                Perlu diingat kalau middleware dan controller pada rakit framework selalu menggunakan <code>return</code> untuk
                mengembalikan hasil.
              </blockquote>

              <!-- MIDDLEWARE:MANIPULATE-RESPONSE -->
              <h4 id="middleware-manipulate">
                <a href="#middleware-manipulate">Middleware untuk Manipulasi Response</a>
              </h4>
              <p>
                Terkadang kamu mungkin mau mengubah respon atau hasil yang dikirimkan oleh controller seperti menghapus karakter ilegal,
                replace sesuatu, menginsert sesuatu ke JSON yang dihasilkan, dsb.
              </p>
              <p>
                Pada contoh berikut ini kita akan membuat middleware 'api' yang berguna untuk menambahkan 'status' ke dalam JSON.
              </p>
              <p>
                1. Mendaftarkan middleware:
              </p>
              <pre><code class="php">$app->setMiddleware('api', function($req, $res, $next) {
    $result = $next();
    return array_merge([
      'status' => 'ok'
    ], $result);
});</code></pre>
              <p>
                2. Mendaftarkan middleware ke route.
              </p>
              <pre><code class="php">$app->get('/api/something', function() {
    return [
        'message' => 'Hola!'
    ];
})->api();</code></pre>
              <p>
                Pada contoh diatas, jika kamu mengakses '/api/something' maka hasilnya adalah JSON sebagai berikut:
              </p>
              <pre><code class="javascript">{
    "status": "ok",
    "message": "Hola!"
}</code></pre>

              <!-- MIDDLEWARE:PARAMETER -->
              <h4 id="middleware-parameter">
                <a href="#middleware-parameter">Middleware dengan Parameter</a>
              </h4>
              <p>
                Seringkali kita mendapatkan kasus dimana aplikasi yang kita kembangkan memiliki berbagai macam kategori user, seperti 'admin', 'guru', 'murid'.
                Jika kamu ingin membuat middleware untuk autentikasi 3 kategori user tersebut, terdapat 2 cara. 
              </p>
              <p>
                Cara pertama kamu mendaftarkan 3 buah middleware untuk masing-masing kategori. 
                Atau kamu cukup mendaftarkan sebuah middleware yang menerima parameter.
              </p>
              <p>
                Berikut contoh menggunakan parameter pada middleware untuk kasus tersebut:
              </p>
              <p>
                1. Mendaftarkan middleware. Tambahkan parameter <code>$category</code> pada akhir <code>Closure</code>.
              </p>
              <pre><code class="php">$app->setMiddleware('auth', function($req, $res, $next, $category) {
    // cek apakah user sudah login
    if (!isset($_SESSION['user']) OR !is_array($_SESSION['user'])) {
        return $res->send('Anda belum login', 401);
    }

    // cek apakah kategori user sesuai $category
    if ($_SESSION['user']['category'] != $category) {
        return $res->send('Anda tidak memiliki hak akses ke halaman ini', 403);
    }

    return $next();
});</code></pre>
              <p>
                2. Mendaftarkan middleware ke route. Masukkan parameter ke middleware <code>auth</code> yang telah dibuat.
              </p>
              <pre><code class="php">$app->get('/admin/dashboard', function() {
    return "Halo admin";
})->auth('admin');

$app->get('/guru/dashboard', function() {
    return "Halo guru";
})->auth('guru');

$app->get('/murid/dashboard', function() {
    return "Halo Murid";
})->auth('murid');</code></pre>

              <h2 id="request">
                <a href="#request">Request</a>
              </h2>
              <p>
                TODO: write this
              </p>
              <h2 id="response">
                <a href="#response">Response</a>
              </h2>
              <p>
                TODO: write this
              </p>
              <h2 id="container">
                <a href="#container">Container</a>
              </h2>
              <p>
                
              </p>
            </section>
          </div>
        </div>
      </div>
    </div>
  </main>
  <footer>
    <div class="container">
      &copy; 2016 Rakit Framework <span class="text-muted">|</span> <a href="https://github.com/rakit/framework">github</a>
    </div>
  </footer>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>

</body>
</html>